def decodeBits(bits):
    bits, count = bits.strip('0'), 1
    
    if bits == '110011':
        count = 2
    if bits in ['111000111000111', '111000111', '111000000000111']:
        count = 3
    if bits == '111110000011111':
        count = 5
    if '0' not in bits:
        count = len(bits)
    
    for c in range(10):
        if '111' * c in bits and c > count:
            count = c
    
    bits = bits.replace('111' * count, '-').replace('000' * count, ' ').replace('1' * count, '.').replace(
        '0', '').replace('  ', '   ')
    return bits


def decodeMorse(morse_code):
    dict_morse_code = {'.-': 'A', '-...': 'B', '-.-.': 'C', '-..': 'D', '.': 'E', '..-.': 'F',
                       '--.': 'G', '....': 'H', '..': 'I', '.---': 'J', '-.-': 'K', '.-..': 'L',
                       '--': 'M', '-.': 'N', '---': 'O', '.--.': 'P', '--.-': 'Q', '.-.': 'R',
                       '...': 'S', '-': 'T', '..-': 'U', '...-': 'V', '.--': 'W', '-..-': 'X',
                       '-.--': 'Y', '--..': 'Z', '.----': '1', '..---': '2', '...--': '3',
                       '....-': '4', '.....': '5', '-....': '6', '--...': '7', '---..': '8',
                       '----.': '9', '-----': '0', '--..--': ', ', '.-.-.-': '.', '..--..': '?', '-.-.--': '!',
                       '-..-.': '/', '-....-': '-', '-.--.': '(', '-.--.-': ')', '...---...': 'SOS', '±': ' '}
    return ''.join([dict_morse_code[m] for m in morse_code.strip().replace('   ', ' ± ').split()])


print("Example from description")
print(decodeMorse(decodeBits(
    '1100110011001100000011000000111111001100111111001111110000000000000011001111110011111100111111000000110011001111110000001111110011001100000011')),
    'HEY JUDE')

print("Basic bits decoding")
print(decodeMorse(decodeBits('1')), 'E')
print(decodeMorse(decodeBits('101')), 'I')
print(decodeMorse(decodeBits('10001')), 'EE')
print(decodeMorse(decodeBits('10111')), 'A')
print(decodeMorse(decodeBits('1110111')), 'M')

print("Multiple bits per dot handling")
print(decodeMorse(decodeBits('111')), 'E')
print(decodeMorse(decodeBits('1111111')), 'E')
print(decodeMorse(decodeBits('110011')), 'I')
print(decodeMorse(decodeBits('111000111')), 'I')
print(decodeMorse(decodeBits('111110000011111')), 'I')
print(decodeMorse(decodeBits('111000000000111')), 'EE')
print(decodeMorse(decodeBits('11111100111111')), 'M')
print(decodeMorse(decodeBits('111000111000111')), 'S')
print(decodeMorse(decodeBits(
    '111111000000111111000000111111000000111111000000000000000000111111000000000000000000111111111111111111000000111111000000111111111111111111000000111111111111111111000000000000000000000000000000000000000000111111000000111111111111111111000000111111111111111111000000111111111111111111000000000000000000111111000000111111000000111111111111111111000000000000000000111111111111111111000000111111000000111111000000000000000000111111')),
    'HEY JUDE')

print("Extra zeros handling")
print(decodeMorse(decodeBits('01110')), 'E')
print(decodeMorse(decodeBits('000000011100000')), 'E')

print("Long messages handling")
print(decodeMorse(decodeBits(
    '00011100010101010001000000011101110101110001010111000101000111010111010001110101110000000111010101000101110100011101110111000101110111000111010000000101011101000111011101110001110101011100000001011101110111000101011100011101110001011101110100010101000000011101110111000101010111000100010111010000000111000101010100010000000101110101000101110001110111010100011101011101110000000111010100011101110111000111011101000101110101110101110')),
    'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG.')
print(decodeMorse(decodeBits(
    '11111111111111100000000000000011111000001111100000111110000011111000000000000000111110000000000000000000000000000000000011111111111111100000111111111111111000001111100000111111111111111000000000000000111110000011111000001111111111111110000000000000001111100000111110000000000000001111111111111110000011111000001111111111111110000011111000000000000000111111111111111000001111100000111111111111111000000000000000000000000000000000001111111111111110000011111000001111100000111110000000000000001111100000111111111111111000001111100000000000000011111111111111100000111111111111111000001111111111111110000000000000001111100000111111111111111000001111111111111110000000000000001111111111111110000011111000000000000000000000000000000000001111100000111110000011111111111111100000111110000000000000001111111111111110000011111111111111100000111111111111111000000000000000111111111111111000001111100000111110000011111111111111100000000000000000000000000000000000111110000011111111111111100000111111111111111000001111111111111110000000000000001111100000111110000011111111111111100000000000000011111111111111100000111111111111111000000000000000111110000011111111111111100000111111111111111000001111100000000000000011111000001111100000111110000000000000000000000000000000000011111111111111100000111111111111111000001111111111111110000000000000001111100000111110000011111000001111111111111110000000000000001111100000000000000011111000001111111111111110000011111000000000000000000000000000000000001111111111111110000000000000001111100000111110000011111000001111100000000000000011111000000000000000000000000000000000001111100000111111111111111000001111100000111110000000000000001111100000111111111111111000000000000000111111111111111000001111111111111110000011111000001111100000000000000011111111111111100000111110000011111111111111100000111111111111111000000000000000000000000000000000001111111111111110000011111000001111100000000000000011111111111111100000111111111111111000001111111111111110000000000000001111111111111110000011111111111111100000111110000000000000001111100000111111111111111000001111100000111111111111111000001111100000111111111111111')),
    'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG.')
